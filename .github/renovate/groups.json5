{
  $schema: 'https://docs.renovatebot.com/renovate-schema.json',

  packageRules: [
    // Node.js runtime
    {
      matchPackageNames: ['node'],
      matchManagers: ['dockerfile', 'npm'],
      groupName: 'Node.js',
      commitMessageTopic: 'Node.js',
    },

    // TypeScript ecosystem
    {
      matchPackageNames: ['typescript'],
      matchPackagePatterns: ['^@types/'],
      groupName: 'TypeScript',
      automerge: false,
    },

    // Next.js + React
    {
      matchPackageNames: ['next', 'react', 'react-dom'],
      matchPackagePatterns: ['^@next/'],
      groupName: 'Next.js',
      automerge: false,
    },

    // Tailwind
    {
      matchPackageNames: ['tailwindcss'],
      matchPackagePatterns: ['^@tailwindcss/'],
      groupName: 'Tailwind CSS',
    },

    // ESLint
    {
      matchPackageNames: ['eslint'],
      matchPackagePatterns: ['^eslint-', '^@typescript-eslint/'],
      groupName: 'ESLint',
    },

    // Prettier
    {
      matchPackageNames: ['prettier'],
      matchPackagePatterns: ['^prettier-', '^@prettier/'],
      groupName: 'Prettier',
    },

    // Testing (Cypress)
    {
      matchPackageNames: ['cypress'],
      matchPackagePatterns: ['^@cypress/', '^cypress-'],
      groupName: 'Cypress',
    },

    // Database - needs careful review due to migrations
    {
      matchPackageNames: ['pg', 'sqlite3', 'better-sqlite3', 'typeorm'],
      groupName: 'Database',
      automerge: false,
      minimumReleaseAge: '7 days',
    },

    // Auth & security
    {
      matchPackageNames: ['bcrypt', 'jsonwebtoken', 'cookie-parser', '@dr.pogodin/csurf'],
      groupName: 'Security',
      automerge: false,
    },

    // Helm charts
    {
      matchManagers: ['helm-values'],
      groupName: 'Helm',
    },

    // Major updates need review
    {
      matchUpdateTypes: ['major'],
      automerge: false,
      minimumReleaseAge: '3 days',
    },
  ],
}
